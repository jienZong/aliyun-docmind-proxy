# 配置说明

## 代理服务配置

### 核心理念
我们的代理服务设计为**极简配置**：
- 用户提供自己的AccessKey+Secret
- 服务代替用户调用阿里云SDK
- 返回处理结果给用户
- **无需配置阿里云相关参数**

### 1. 创建配置文件

```bash
# 复制示例配置文件
cp .env.example .env

# 编辑配置文件
nano .env  # 或使用其他编辑器
```

### 2. 必需配置项

#### 基础配置
- `PORT`: 服务端口号（默认 3000）

#### 安全配置
- `JWT_SECRET`: JWT签名密钥（**生产环境必须修改**）
- `ALLOWED_IPS`: IP白名单（**生产环境必须配置**）

### 3. IP白名单格式

```
# 单个IP
ALLOWED_IPS=127.0.0.1

# 多个IP和网段
ALLOWED_IPS=127.0.0.1,::1,192.168.1.0/24
```

### 4. 生产环境配置

```bash
# 生成强随机JWT密钥
JWT_SECRET=$(openssl rand -base64 32)

# 配置生产环境IP白名单
ALLOWED_IPS=your-production-ip,192.168.1.0/24

# 使用生产端口
PORT=8080
```

### 5. 启动服务

```bash
# 开发环境
npm run dev

# 生产环境
npm run build
npm start
```

## 为什么配置这么简单？

1. **用户自管理**: 用户提供自己的阿里云凭据
2. **透明代理**: 我们只是"透传"用户的请求
3. **无状态设计**: 不存储用户数据
4. **安全隔离**: 通过IP白名单控制访问

## 安全注意事项

1. **JWT密钥**: 生产环境必须使用强随机密钥
2. **IP白名单**: 只允许必要的IP访问
3. **HTTPS**: 生产环境建议使用HTTPS
4. **监控**: 监控服务日志和访问记录
